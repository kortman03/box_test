<!DOCTYPE html>
<html>
<head>
	<center><h1>FIREWORKS</h1></center>
	<title>box test</title>
	<style type="text/css">
    canvas {
      border: solid 1px #000;
      background-color: black;
      
    }
</style>
</head><center><canvas id="canvas" width="600" height="400"></canvas></center>
<body>
	<script type="text/javascript">
	var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    var boxes = []
    var color = ["red", "blue", "green", "orange", "purple", "yellow", "teal", "white" ,"silver", "brown" ]
    
    var settings = {
      numberOfBoxes: 20,
      maxSize: 35,
      maxDuration: 30
    } 

    function createBox(){

    	return{
    		x: randomNum(canvas.width),
    		y: randomNum(canvas.height),
    		size: randomNum(maxSize),
    		color: color[randomNum(color.length)],
    		duration: randomNum(maxDuration) + 10
    	}
    }   

    function randomNum(n){
    return Math.floor(Math.random() * n );
    }

    function createBoxes(n){
    	for(i=0;i<numberOfBoxes;i++){
    		boxes.push(createBox())
    	}
    }


      function drawBoxes(){
      for(i=0;i<boxes.length;i++){
      context.fillStyle = boxes[i].color;
      context.fillRect(boxes[i].x, boxes[i].y, boxes[i].size, boxes[i].size);
	      }
  }

      function reduceDuration(){
      for(i=0;i<boxes.length;i++){
        boxes[i].duration -= 1;
      }
    }

    function deleteExpiredBoxes(){
      for(i=0;i<boxes.length;i++){
        if(boxes[i].duration == 0){
          boxes.splice(i,1);
        }
      }
    }

      
    function runTest(){
      context.clearRect(0,0,canvas.width,canvas.height);
      drawBoxes()
      reduceDuration()
      deleteExpiredBoxes()
      requestAnimationFrame(runTest)
    }
    createBoxes(settings.numberOfBoxes)
    runTest() 
    console.log(boxes)  
      
 

    

	</script>
      </body>
	</html>